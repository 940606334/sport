<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no"/>
        <title>文件上传</title>
        <link href="/css/index.css" rel="stylesheet"/>
        <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
        <style>
            #uploadForm{
                text-align: center;
            }
        </style>
    </head>
    <body>
    <div class="c-Publish">
        <form action="/upload" method="post" id="uploadForm" enctype="multipart/form-data"
              >
            <input type="file" name="file" id="file"/>
            <span id="msg" th:text="${message}"/>
        </form>
        <a href="javascript:;" id="btn" class="btn btn-max btn-green">上传</a>
    </div>
    </body>
    <script>
        $(document).ready(function () {
            $("#btn").click(upload)
        })
        function upload() {
            var file=$("#file").val();
            $("#msg").html("");
            if(!file){
                $("#msg").html("文件不能为空");
                return;
            }
            console.log(file);
            //取出上传文件的扩展名
            var index = file.lastIndexOf(".");
            var ext = file.substr(index+1);
            //console.log(ext);
            if(!ext){
                $("#msg").html("文件后缀名不能为空");
                return;
            }else if("txt"!=ext){
                $("#msg").html("文件后缀名只能等于txt");
                return;
            }
            $("#uploadForm").submit();
        }
    </script>
</html>